!function(){function T(e){O("on");var t=new FormData;t.append("action","automaticcss_save_settings"),t.append("nonce",automatic_css_settings.nonce);let o={};e.forEach(t=>{if("submit"!==t.type&&"button"!==t.type){var s=t.getAttribute("name");let e=t.value;if("radio"===t.type){if(o.hasOwnProperty(s))return;t=document.querySelector("input[name='"+s+"']:checked");t&&t.value&&(e=t.value)}o[s]=e}});e=JSON.stringify(o);t.append("variables",e);let p=document.getElementById("acss-settings__response-message");console.log("Submitting form to Automatic.css backend"),fetch(automatic_css_settings.ajax_url,{method:"POST",credentials:"same-origin",body:t}).then(e=>e.json()).then(o=>{var[e=null]=[];if(null!==e){var e=document.getElementById(e);e&&((s=e.closest(".acss-var"))?(s.classList.remove("error"),(s=s.querySelector(".acss-var__error_message"))&&(s.innerHTML="")):(s=e.closest(".acss-group"))&&(s.classList.remove("error"),s=s.querySelector(".acss-group__error_message"))&&(s.innerHTML=""),(s=e.closest(".acss-accordion"))&&s.classList.remove("error"),s=e.closest(".acss-tab"))&&(e=s.id,(s=s.querySelectorAll(".acss-var.error"))&&0!==s.length||(s=document.querySelector(`a[href="#${e}"]`))&&s.classList.remove("error"))}else{e=document.querySelectorAll(".acss-var.error");if(0<e.length)for(var t of e)t.classList.remove("error");var s=document.querySelectorAll(".acss-group.error");if(0<s.length)for(var a of s)a.classList.remove("error");e=document.querySelectorAll(".acss-accordion.error");if(0<e.length)for(var r of e)r.classList.remove("error");e=document.querySelectorAll(".acss-var__error_message");if(0<e.length)for(var c of e)c.innerHTML="";e=document.querySelectorAll(".acss-group__error_message");if(0<e.length)for(var n of e)n.innerHTML="";e=document.querySelectorAll(".acss-nav a.error");if(0<e.length)for(var l of e)l.classList.remove("error")}if(console.log("Received response from Automatic.css backend",o),o.hasOwnProperty("success")){let e,t="",s=null;if(!0===o.success)t="success",e=o.data;else{t="error",e=o.data.hasOwnProperty("message")?o.data.message:o.data,s=1e4;var i=o.data.hasOwnProperty("errors")?o.data.errors:null;if(i&&0<Object.keys(i).length)for(const m in i){var u=i[m];{d=void 0;v=void 0;f=void 0;var d=m;var v=u;var f=document.getElementById(d);let e=null;e=f?f.closest(".acss-var"):document.querySelector("#acss-var-"+d);e?(e.classList.add("error"),e.classList.remove("hidden"),(d=e.querySelector(".acss-var__error_message"))&&(d.innerHTML=v)):(d=f.closest(".acss-group"))&&(d.classList.add("error"),d.classList.remove("hidden"),d=d.querySelector(".acss-group__error_message"))&&(d.innerHTML+=v+"<br/>");d=f.closest(".acss-accordion");d&&d.classList.add("error");v=f.closest(".acss-tab");v&&(d=v.id,f=document.querySelector(`a[href="#${d}"]`))&&f.classList.add("error")}}}h(p,e,t,s)}else e="Expecting a success status from the AJAX call, but got this instead: "+o.success,console.error(e,o),h(p,e,"error",0);O("off")}).catch(e=>{var t="Received an error from Automatic.css backend: "+e.message;console.error(t,e),h(p,t,"error",0),O("off")})}function h(e,t,s,o=5e3){o=o||5e3,e.innerHTML=`<p class="${s}">${t}</p>`,(e.style.bottom=0)<o&&setTimeout(function(){e.style.bottom="-1000px"},o)}function B(e,t,s){var o=t.type||"show_only_if",a=String(t.value);if("show_only_if"===o){var r=document.getElementById(t.field_wrapper_id)||e.closest(".acss-var")||e,s=(s===a?(o=t.required||!0,r.classList.remove("hidden"),e.classList.remove("hidden"),o&&e.setAttribute("required","required")):(r.classList.add("hidden"),e.classList.add("hidden"),e.removeAttribute("required")),[".acss-group",".acss-accordion",".acss-panel"]);for(const n of s){var c=r.closest(n);c&&(c.querySelector(".acss-value__input:not(.hidden)")?c.classList.remove("hidden"):c.classList.add("hidden")),"acss-accordion"===n&&H(c)}}}function C(e,t){var s=R(t.value);t.dataset.h=s.h,t.dataset.s=s.s,t.dataset.l=s.l,e.innerHTML=`HSL: ${s.h}Â°, ${s.s}%, ${s.l}%`}function $(e,t){var s,o,t=R(t.value),a=e.getElementsByClassName("acss-value");3!==a.length?console.error("Shade group does not have three shade elements."):(e=e.querySelector(".acss-var__swatch"),s=a[0].querySelector(".acss-value__input").value,o=a[1].querySelector(".acss-value__input").value,t=(a=a[2].querySelector(".acss-value__input")).name.includes("-hover-")?Math.round(t.l*a.value):Math.round(a.value),e.dataset.h=s,e.dataset.s=o,e.dataset.l=t,e.style.backgroundColor=`hsl(${s}, ${o}%, ${t}%)`)}function H(e,t=null){e=e.closest(".acss-accordion__content-wrapper");e&&(null===t&&(t=e.scrollHeight),e.style.maxHeight=t+"px")}function N(e){const t=e.closest(".acss-value__input-wrapper").querySelector(".acss-reset-button");var s,o,a;t&&(s=D(e),o=P(e),a=(e=e.closest(".acss-group")||e.closest(".acss-var")).classList.contains("acss-group")?"acss-group--changed":"acss-var--changed",s!==o?(t.removeAttribute("disabled"),e.classList.add(a)):(e.classList.remove(a),t.setAttribute("disabled","disabled"),t.classList.add("rotate-reset"),setTimeout(function(){t.classList.remove("rotate-reset")},400)))}function I(e){history.pushState({},"",e),history.pushState({},"",e),history.back()}function O(e){show="on"===e;e=document.querySelector(".acss-loading-wrapper");show?e.classList.remove("hidden"):e.classList.add("hidden")}function P(e){switch(e.type){case"radio":var t=e.getAttribute("name"),t=document.querySelector("input[name='"+t+"']:checked");if(t&&t.value)return t.value;case"submit":case"button":return;default:return e.value}return null}function D(e){switch(e.type){case"radio":var t=e.closest(".acss-value__input-wrapper--toggle");if(t)return t.dataset.default;case"submit":case"button":return;default:return e.dataset.default}return null}function R(e){let t=0,s=0,o=0,a=(4===e.length?(t="0x"+e[1]+e[1],s="0x"+e[2]+e[2],o="0x"+e[3]+e[3]):7===e.length&&(t="0x"+e[1]+e[2],s="0x"+e[3]+e[4],o="0x"+e[5]+e[6]),t/=255,s/=255,o/=255,Math.min(t,s,o)),r=Math.max(t,s,o),c=r-a,n=0,l,i;return n=0==c?0:r===t?(s-o)/c%6:r===s?(o-t)/c+2:(t-s)/c+4,(n=Math.round(60*n))<0&&(n+=360),i=(r+a)/2,l=+(100*(0==c?0:c/(1-Math.abs(2*i-1)))).toFixed(1),i=+(100*i).toFixed(1),{h:Math.round(n),s:Math.round(l),l:Math.round(i)}}window.onload=function(){if(automatic_css_settings){var s,e,t,o,a;O("on"),Coloris({el:".acss-value__input--color",alpha:!1});for(const _ of document.querySelectorAll(".acss-value__input--color")){var r=_.closest(".acss-panel");if(r){var c=r.id.includes("-contextual-colors"),n=c?_.closest(".acss-accordion__content"):r.querySelector(".acss-accordion__content");if(n){const y=function(e,t){var s=document.createElement("div"),e=(s.classList.add("acss-var__hsl"),e.querySelector(".acss-group:first-of-type")||e.querySelector(".acss-var:first-of-type"));e&&(e.before(s),C(s,t));return s}(n,_);const L=(c?_.closest(".acss-accordion"):r.querySelector(".acss-accordion")).querySelectorAll(".acss-group");for(const S of L){!function(e,t){var s=e.querySelector(".acss-group__title"),o=document.createElement("div");o.classList.add("acss-var__swatch"),s.appendChild(o),$(e,t)}(S,_);var l=S.getElementsByClassName("acss-value");if(3!==l.length)console.error("Shade group does not have three shade elements.");else for(const b of l)b.querySelector(".acss-value__input").addEventListener("change",function(e){$(S,_)})}_.addEventListener("change",function(e){C(y,e.target);var t=L,s=e.target,o=R(s.value);for(const c of t){var a=c.getElementsByClassName("acss-value");if(3!==a.length)return void console.error("Shade group does not have three shade elements.");var r=a[0].querySelector(".acss-value__input"),a=(r.value=o.h,r.dataset.default=o.h,a[1].querySelector(".acss-value__input"));a.value=o.s,a.dataset.default=o.s,N(r),N(a),$(c,s)}})}}}automatic_css_settings.tab_ids?(t=automatic_css_settings.tab_ids,s=document.getElementById("last-tab"),f=new URL(document.URL),e=f.hash,v=null,o=!1,""!==e?(e=e.replace("#",""),t.includes(e)||(o=!0)):null!==s&&""!==s.value&&t.includes(s.value)?v=s.value:o=!0,(v=o?"acss-tab-viewport":v)&&(f.hash=v,document.location.href=f.href,I(f.href)),e=".acss-nav a[href^='#"+f.hash.replace("#","")+"']",null!==(t=document.querySelector(e).parentNode||null)&&t.classList.add("active"),o=document.querySelectorAll(".acss-nav a[href^='#']"),[].forEach.call(o,function(t){t.addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".acss-nav li.active").forEach(function(e){e.classList.remove("active")}),e.target.parentNode.classList.add("active"),s.value=new URL(t.href).hash.replace("#",""),I(t.href),document.querySelector(".acss-tabs-wrapper").scrollTop=0})})):console.error("Tab information not found in the automatic_css_settings object.");{const q=document.querySelectorAll(".acss-accordion");for(const w of q)w.querySelector(".acss-accordion__header").addEventListener("click",function(e){for(const s of q){var t=s.querySelector(".acss-accordion__header");const o=s.querySelector(".acss-accordion__content-wrapper");this!==t||s.classList.contains("acss-accordion--open")?(s.classList.remove("acss-accordion--open"),o.classList.remove("acss-accordion--visible"),H(o,0)):(s.classList.add("acss-accordion--open"),setTimeout(function(){o.classList.add("acss-accordion--visible")},400),H(o))}})}var i=automatic_css_settings.variables;for(const E in i){var u=i[E].type,d=i[E].no_reset||!1;document.getElementById(E);d||!function(e,c){const n=document.getElementsByName(e),t=document.getElementById(e);var s,l;if("toggle"===c){if(null===n||0===n.length)return console.warn("toggle_elements is null or empty for "+e);s=n[0].closest(".acss-value__input-wrapper"),l=s.querySelector(".acss-value__input-wrapper--toggle").dataset.default}else{if(null===t)return console.warn("variable_element is null for "+e);s=t.closest(".acss-value__input-wrapper"),l=t.dataset.default}const i=s.querySelector(".acss-reset-button"),o=(i.addEventListener("click",function(e){e.preventDefault(),this.classList.toggle("tooltip-active")}),i.closest(".acss-wrapper")),a=(o.addEventListener("click",function(e){e.target!==i&&i.classList.contains("tooltip-active")&&i.classList.toggle("tooltip-active")}),s.querySelector(".acss-tooltip__accept"));a.addEventListener("click",function(e){e.preventDefault();var t=!1,s=null;if("toggle"===c)for(const r of n){var o=!1;l===r.value&&(t=o=!0,s=r),r.checked=o}else{var e=e.target.closest(".acss-value__input-wrapper").querySelector(".acss-value__input"),a=P(e);const l=D(e);a!==l&&(e.value=l,t=!0,s=e,"color"===c)&&(a=e.dataset.default,e.closest(".clr-field").setAttribute("style",`color: ${a};`))}t&&(s.focus(),i.classList.remove("tooltip-active"),setTimeout(function(){i.classList.remove("rotate-reset")},400),s.dispatchEvent(new Event("change")))})}(E,u),i[E].hasOwnProperty("condition")&&(d=i[E].condition,function(e,t){const s=document.getElementById(e)||document.querySelector("#acss-var-"+e),o=t.field,a=document.getElementsByName(o);if(null===a||0===a.length)console.warn("Condition field element is null for "+o);else{var r,e=P(a[0]);B(s,t,e);for(r of a)r.addEventListener("change",function(e){e=String(e.target.value);B(s,t,e)})}}(E,d))}var v=document.querySelector("#button-pro-mode"),f=(v&&v.addEventListener("click",function(e){e.stopPropagation();var t;for(t of["option-owl","option-margin","option-padding","option-overlays","option-text-color","option-link-color","option-opacities","option-box-shadows","option-flip","option-object-fit","option-height","option-aspect-ratios","option-z-index","option-marker-colors","option-visibility","option-flex-grids","option-contextual-color-classes"]){var s=document.querySelector(`#${t}-on`),o=document.querySelector(`#${t}-off`);s.checked=!1,o.checked=!0,N(s)}}),(v=document.querySelector("#button-pro-mode-reset"))&&v.addEventListener("click",function(e){var t;e.stopPropagation();for(t of document.querySelector("#acss-panel-framework-settings").querySelectorAll(".acss-value__input-wrapper--toggle")){var s=t.dataset.toggleName,o=document.querySelector(`#${s}-on`),s=document.querySelector(`#${s}-off`);o.checked=!0,s.checked=!1,N(o)}}),document.querySelectorAll(".acss-value__input"));for(const A of f){var m=A.parentNode.querySelector(".acss-value__unit");A.nextElementSibling==m&&(A.style.borderRadius="var(--acss-border-radius) 0 0 var(--acss-border-radius)"),A.addEventListener("change",function(e){N(e.target)})}null===(a=document.getElementById("acss-settings-form"))?console.error("Missing #acss_settings_form element, can't hook submit event listener"):(a.addEventListener("submit",function(e){e.preventDefault(),T([...e.currentTarget.elements])}),document.addEventListener("keydown",function(e){(e.metaKey||e.ctrlKey)&&"s"===e.key&&(e.preventDefault(),T([...a.elements]))}));for(const x of document.querySelectorAll(".acss-copy-to-clipboard"))x.addEventListener("click",async e=>{if(navigator.clipboard){const t=e.target.dataset.content||"";if(""!==t)try{await navigator.clipboard.writeText(t),e.target.textContent="Copied to clipboard",setTimeout(()=>{e.target.textContent=t},1500)}catch(e){console.error("Failed to copy!",e)}}else console.warn("Clipboard API not available")});O("off");var p=document.getElementsByClassName("acss-info-tooltip__text");for(let e=0;e<p.length;e++){var h=p[e].textContent.length;p[e].style.width=26<h?"26ch":h-10+"ch"}for(const k of document.querySelectorAll(".acss-value__unit")){var g=k.textContent.length;k.style.width=g+"ch"}for(const M of document.querySelectorAll(".acss-value__input--option"))M.style.fontFamily='"DM sans", sans-serif'}else console.error("automatic-css-plugin: automatic_css_settings is not defined")},document.addEventListener("DOMContentLoaded",function(e){for(const s of document.querySelectorAll("input.acss-value__input")){const o=s.nextElementSibling.classList.contains("acss-value__unit");var t=s.value.length;const a=s.classList.contains("acss-value__input--dropdown"),r=s.classList.contains("acss-value__input--color");!o||a||r?o||a||r?a&&(s.style.paddingRight="6ch"):s.style.width=t+6+"ch":s.style.width=t+2+"ch",s.addEventListener("input",()=>{var e=s.value.length;!o||a||r?o||a||r?a&&(s.style.paddingRight="6ch"):s.style.width=e+6+"ch":s.style.width=e+2+"ch"})}})}();