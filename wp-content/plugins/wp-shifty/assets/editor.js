jQuery(function(){var f,t,k;var c={location:{href:""}};function j(C){if(typeof wp_shifty.i18n[C]!=="undefined"){return wp_shifty.i18n[C]}return C}function x(E,D){var F=a(E);if(jQuery("#"+F).length==0){var C=jQuery("<div>",{id:F,text:E,"class":"wpshifty-status wpshifty-status-"+D});jQuery(".wpshifty-status-wrapper").prepend(C);setTimeout(function(){jQuery(C).addClass("disappearing")},2000);setTimeout(function(){jQuery(C).remove()},3000)}}function o(){return parseInt(Math.random()*100000000).toString(16)}function a(E){var D=0;if(E.length==0){return D}for(var C=0;C<E.length;C++){var F=E.charCodeAt(C);D=((D<<5)-D)+F;D=D&D}return D.toString(16)}function p(C){return C.replace(/\s/g,"-").toLowerCase().replace(/("|')/,"")}function q(C){C=C||"body";jQuery(C).addClass("wpshifty-is-loading")}function r(C){if(C){jQuery(C).removeClass("wpshifty-is-loading")}else{jQuery(".wpshifty-is-loading").removeClass("wpshifty-is-loading")}}function y(){jQuery(".wpshifty-resource-list").each(function(){if(jQuery(this).find(".wpshifty-resource-disabled, .wpshifty-resource-overwritten, .wpshifty-resource-preloaded, .wpshifty-resource-lazyloaded, .wpshifty-render-blocking, .wpshifty-unused").length>0){jQuery(this).find(".wpshifty-resource-list-checkbox").prop("checked",true)}})}function g(C){return String(C).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function m(C){C.preventDefault();if(jQuery(".wpshifty-what-editor-rule.unsaved .wpshifty-file-editor-url").length>0){var D=new FormData();D.append("action","wpshifty_cleanup");D.append("nonce",wp_shifty.nonce);jQuery(".wpshifty-what-editor-rule.unsaved .wpshifty-file-editor-url").each(function(){D.append("files[]",jQuery(this).val())});navigator.sendBeacon(ajaxurl,D)}}function f(){last_saved_form=jQuery("#wpshifty-editor-form").find('[name^="condition"], [name^="browser"], [name^="elements"]').serialize();t()}function t(){last_refreshed_form=jQuery("#wpshifty-editor-form").find('[name^="elements"]').serialize()}window.addEventListener("beforeunload",function(){if(jQuery("#wpshifty-editor-form").hasClass("unsaved")){event.preventDefault();delete (event.returnValue)}});window.addEventListener("unload",m);jQuery(document).on("wpshifty-reset",".wpshifty-autocomplete-set",function(C){jQuery(this).find(".wpshifty-autocomplete-list").empty();jQuery(this).find(".wpshifty-autocomplete-search").val("").trigger("change");jQuery(this).trigger("wpshifty-set-toggle")});jQuery(document).on("wpshifty-set-toggle",".wpshifty-autocomplete-set",function(C){jQuery(this).find(".wpshifty-autocomplete-toggle").addClass("wpshifty-hidden");if(jQuery(this).find(".wpshifty-autocomplete-list li").length>0){jQuery(this).find(".wpshifty-autocomplete-toggle").removeClass("wpshifty-hidden")}});jQuery(document).on("click",".wpshifty-autocomplete-toggle",function(D){D.preventDefault();var C=jQuery(this).parent().width()-8;jQuery(this).closest(".wpshifty-autocomplete-set").find(".wpshifty-autocomplete-wrapper").toggleClass("wpshifty-hidden").width(C)});jQuery(document).on("keyup change focus",".wpshifty-autocomplete-search",function(){var D=jQuery(this).next();var C=jQuery(this).val();jQuery(D).find("li").each(function(){jQuery(this).addClass("wpshifty-hidden");if(jQuery(this).text().match(C)){jQuery(this).removeClass("wpshifty-hidden")}})});jQuery(document).on("click",".wpshifty-autocomplete-list li",function(C){C.preventDefault();jQuery(this).closest(".wpshifty-autocomplete-wrapper").prev().val(jQuery(this).text()).trigger("wpshifty-autocomplete").trigger("change");jQuery(this).closest(".wpshifty-autocomplete-wrapper").addClass("wpshifty-hidden")});jQuery(document).on("keydown",function(C){if(C.keyCode==27){jQuery(".wpshifty-autocomplete-wrapper").addClass("wpshifty-hidden")}});jQuery(document).on("click",function(C){if(!jQuery(C.target).hasClass("wpshifty-autocomplete-set")&&jQuery(C.target).closest(".wpshifty-autocomplete-set").length==0){jQuery(".wpshifty-autocomplete-wrapper").addClass("wpshifty-hidden")}});jQuery(document).on("keyup change focus",".wpshifty-nice-select-filter",function(){var D=jQuery(this).closest(".wpshifty-nice-select-wrapper").find(".wpshifty-nice-select");var C=new RegExp(jQuery(this).val(),"i");jQuery(".wpshifty-nice-select-clear-filter").addClass("wpshifty-hidden");jQuery(".wpshifty-nice-select-noresult").addClass("wpshifty-hidden");if(jQuery(this).val()!=""){jQuery(".wpshifty-nice-select-clear-filter").removeClass("wpshifty-hidden")}jQuery(D).find("li").each(function(){jQuery(this).addClass("wpshifty-hidden");if(jQuery(this).text().match(C)){jQuery(this).removeClass("wpshifty-hidden")}});if((D).find("li:not(.wpshifty-hidden)").length==0){jQuery(".wpshifty-nice-select-noresult").removeClass("wpshifty-hidden")}});jQuery(document).on("click",".wpshifty-nice-select-clear-filter",function(){jQuery(this).prev().val("").trigger("change")});jQuery(document).on("change",".wpshifty-url-editor select, .wpshifty-complex-input-editor select",function(){var D=jQuery(this).closest("div");var C=jQuery(D).find(".wpshifty-autocomplete-toggle");jQuery(C).addClass("wpshifty-hidden");switch(jQuery(this).val()){case"regex":jQuery(D).find(".wpshifty-url-input").attr("type","text");break;case"exact":jQuery(C).removeClass("wpshifty-hidden");case"partial":jQuery(D).find(".wpshifty-url-input").attr("type","url");break}});function v(I){var F=false;var D=false;var S=false;var N=false;var M=false;var J="wpshifty-resource-element-wrapper";var O="";var C="";jQuery("#wpshifty-what-editor-disable .wpshifty-what-editor-rule").each(function(){var T=jQuery(this).find(".wpshifty-rule-value");var U=jQuery(this).find('.wpshifty-buttonset-match-type [value="exact"]').prop("checked");if(jQuery(T).val()==I.id&&U){F=true}});jQuery("#wpshifty-what-editor-lazyload .wpshifty-what-editor-rule").each(function(){var T=jQuery(this).find(".wpshifty-rule-value");var U=jQuery(this).find('.wpshifty-buttonset-match-type [value="exact"]').prop("checked");var V=jQuery(this).find('.wpshifty-buttonset-load-type [value="lazy"]').prop("checked");if(jQuery(T).val()==I.id&&U&&V){D=true}});jQuery("#wpshifty-what-editor-overwrite .wpshifty-what-editor-rule").each(function(){var T=jQuery(this).find(".wpshifty-rule-value");if(jQuery(T).val()==I.id){M={saved_file:jQuery(this).find(".wpshifty-file-editor-url").val(),rule_editor_id:jQuery(this).attr("data-rule-id")}}});jQuery("#wpshifty-what-editor-preload .wpshifty-what-editor-rule").each(function(){var T=jQuery(this).find(".wpshifty-rule-value");if(jQuery(T).val()==I.id){S=true}});var E='<span class="wpshifty-resource-size" data-loading="'+j("loading")+'"></span>';if(I.editor_type=="css"){var G=jQuery("#wpshifty-preview").contents().find('[href="'+I.id+'"]').attr("media");if(typeof G!=="undefined"&&G!==""&&G!=="all"&&G!=="shifty-lazy"){E+='<span class="wpshifty-resource-media">@media '+G+"</span>"}}else{if(I.editor_type=="js"){var R=jQuery("#wpshifty-preview").contents().find('[src="'+I.id+'"]');if(R.attr("async")){E+='<span class="wpshifty-resource-media">async</span>'}else{if(R.attr("defer")){E+='<span class="wpshifty-resource-media">defer</span>'}}}}var Q=(!F&&wp_shifty.disabled.resource.includes(I.id));N=(!D&&wp_shifty.lazyloaded.resource.includes(I.id));var L='<div class="wpshifty-resource-data"><span class="wpshifty-resource-element">'+g(I.url.replace(/data-wpshifty-hash="([^"]+)"/,""))+"</span>"+E+"</div>";if(Q){J+=" wpshifty-resource-dequeued"}if(F){J+=" wpshifty-resource-disabled"}if(M!==false){J+=" wpshifty-resource-overwritten";L+=h(M.saved_file,M.rule_editor_id)}if(D){J+=" wpshifty-resource-lazyloaded"}else{if(N){J+=" wpshifty-resource-lazyloaded_readonly"}}if(I.type=="file"||I.editor_type=="js_inline"){C+='<li class="wpshifty-lazyload-resource"><a href="#lazyload-resource" data-editor-type="'+I.editor_type+'" data-editor-rule-value="'+I.id+'" data-load-type="lazy">'+j("Lazyload")+"</a></li>";C+='<li class="wpshifty-unlazyload-resource"><a href="#unlazyload-resource" data-editor-type="'+I.editor_type+'" data-editor-rule-value="'+I.id+'">Remove lazyload</a></li>'}if(I.type=="file"){O='<li class="wpshifty-preload-resource"><a href="#preload-resource" data-editor-type="'+I.editor_type+'" data-editor-rule-value="'+I.id+'">'+j("Preload")+'</a></li><li class="wpshifty-unpreload-resource"><a href="#unpreload-resource" data-editor-type="'+I.editor_type+'" data-editor-rule-value="'+I.id+'">Remove preload</a></li>';if(S){J+=" wpshifty-resource-preloaded"}}var P='<span class="wpshifty-badge wpshifty-badge-success wpshifty-badge-top-right wpshifty-badge-preloaded">'+j("preloaded")+'</span><span class="wpshifty-badge wpshifty-badge-secondary wpshifty-badge-top-right wpshifty-badge-lazyloaded">'+j("lazyloaded")+"</span>";var K='<ul class="wpshifty-resource-actions"><li class="wpshifty-disable-resource"><a href="#disable-resource">Disable</a></li><li class="wpshifty-enable-resource"><a href="#enable-resource" data-editor-type="'+I.editor_type+'" data-editor-rule-value="'+I.id+'">Enable</a></li><li class="wpshifty-overwrite-resource"><a href="#overwrite-resource">Overwrite</a></li>'+O+C+"</ul>";var H='<div class="wpshifty-lighthouse"><div class="wpshifty-lighthouse-tag wpshifty-lighthouse-blocking">'+j("Render blocking")+'<div class="wpshifty-lighthouse-ms"></div></div><div class="wpshifty-lighthouse-tag wpshifty-lighthouse-unused">'+j("Unused bytes")+'<div class="wpshifty-lighthouse-bytes"></div></div></div>';return jQuery("<li>",{"class":J,"data-resource-type":I.type,"data-editor-type":I.editor_type,"data-editor-rule-value":I.id}).html(L+H+K+P)}function z(I,E,J,G){var F=jQuery('<div class="wpshifty-resource-list" data-resource-list="'+p(J)+'"><label for="'+a(J+G)+'"><img src="'+E+'" width="45" height="45"><span>'+J+"</span></label></div>");var H=jQuery('<input type="checkbox" class="wpshifty-resource-list-checkbox" id="'+a(J+G)+'">');var D=jQuery('<ul class="wpshifty-resource-list-inner"></ul>');var C=jQuery('<label class="wpshifty-resource-list-toggle" for="'+a(J+G)+'"><svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M176 32h96c13.3 0 24 10.7 24 24v200h103.8c21.4 0 32.1 25.8 17 41L241 473c-9.4 9.4-24.6 9.4-34 0L31.3 297c-15.1-15.1-4.4-41 17-41H152V56c0-13.3 10.7-24 24-24z"></path></svg></label>');for(i in I){wp_shifty.file_sizes.push(I[i]);I[i].editor_type=G+(I[i].type=="inline"?"_inline":"");jQuery(D).append(v(I[i]));if(I[i].type!=="inline"){wp_shifty.autocomplete.push(I[i].url)}}jQuery(F).append(H,D,C);return F}window.addEventListener("message",function(F){if(F.origin!==wp_shifty.origin){return}if(typeof F.data.jserror!="undefined"){jQuery("#wpshifty-js-error").removeClass("wpshifty-hidden");jQuery("#wpshifty-js-error #wpshifty-js-error-inner").append(jQuery("<p>").html(F.data.jserror));return}if(typeof F.data.observer=="undefined"){return}try{wp_shifty.disabled=F.data.observer.disabled;wp_shifty.lazyloaded=F.data.observer.lazyloaded}catch(H){wp_shifty.disabled=[];wp_shifty.lazyloaded=[]}jQuery("#wpshifty-what-placeholder").addClass("wpshifty-hidden");jQuery("#wpshifty-what").removeClass("wpshifty-empty");jQuery("#wpshifty-what-live").removeClass("wpshifty-disabled");jQuery("#wpshifty-url-not-match").addClass("wpshifty-hidden");jQuery("#wpshifty-was-redirected").addClass("wpshifty-hidden");if(!F.data.observer.match){if(!F.data.observer.redirect){jQuery("#wpshifty-what-placeholder").removeClass("wpshifty-hidden");jQuery("#wpshifty-what").addClass("wpshifty-empty")}jQuery("#wpshifty-url-not-match").removeClass("wpshifty-hidden");jQuery("#wpshifty-backup-preview-url").attr("data-browser",JSON.stringify(F.data.observer.browser_data)).removeClass("wpshifty-hidden")}if(F.data.observer.redirect){jQuery("#wpshifty-was-redirected").removeClass("wpshifty-hidden")}jQuery("#wpshifty-what-live-plugins").empty();if(F.data.observer.active_plugins){F.data.observer.active_plugins.forEach(function(J){var L=(jQuery('[name="elements[plugins]['+J.file+']"]').length>0);var K=(!L&&F.data.observer.disabled.plugin.includes(J.file));jQuery("#wpshifty-what-live-plugins").append('<div class="wpshifty-live-plugin'+(L?" wpshifty-plugin-disabled":"")+(K?" wpshifty-plugin-inactive":"")+'"><div class="wpshifty-live-plugin-inner"><img src="'+wp_shifty.api_url+"plugins/icon/"+J.slug+'" width="45" height="45">'+J.name+'</div><input class="wpshifty-plugin-checkbox wpshifty-switch-checkbox" type="checkbox" id="_'+a(J.file)+'" data-name="elements[plugins]['+J.file+']" value="disabled"'+(L?" checked":"")+'><label for="_'+a(J.file)+'" class="wpshifty-switch"></label></div>')})}jQuery("#wpshifty-what-live-css").empty();jQuery("#wpshifty-what-live-js").empty();if(F.data.observer.resources){wp_shifty.autocomplete=[];for(slug in F.data.observer.resources.plugin){var E=F.data.observer.resources.plugin[slug];var C=wp_shifty.api_url+"plugins/icon/"+slug;var I=E.name;if(E.files.css){jQuery("#wpshifty-what-live-css").append(z(E.files.css,C,I,"css"))}if(E.files.js){jQuery("#wpshifty-what-live-js").append(z(E.files.js,C,I,"js"))}}for(slug in F.data.observer.resources.theme){var G=F.data.observer.resources.theme[slug];var C=wp_shifty.api_url+"themes/icon/"+slug;var I=G.name;if(G.files.css){jQuery("#wpshifty-what-live-css").append(z(G.files.css,C,I,"css"))}if(G.files.js){jQuery("#wpshifty-what-live-js").append(z(G.files.js,C,I,"js"))}}if(F.data.observer.resources.core){var C=wp_shifty.plugin_url+"images/wp.svg";I=j("Core");if(F.data.observer.resources.core.css){jQuery("#wpshifty-what-live-css").append(z(F.data.observer.resources.core.css,C,I,"css"))}if(F.data.observer.resources.core.js){jQuery("#wpshifty-what-live-js").append(z(F.data.observer.resources.core.js,C,I,"js"))}}for(slug in F.data.observer.resources.third_party){var D=F.data.observer.resources.third_party[slug];var C=D.icon;var I=D.name;if(D.files.css){jQuery("#wpshifty-what-live-css").append(z(D.files.css,C,I,"css"))}if(D.files.js){jQuery("#wpshifty-what-live-js").append(z(D.files.js,C,I,"js"))}}if(F.data.observer.resources.unknown){I=j("Unknown");var C=wp_shifty.plugin_url+"images/unknown.png";if(F.data.observer.resources.unknown.css){jQuery("#wpshifty-what-live-css").append(z(F.data.observer.resources.unknown.css,C,I,"css"))}if(F.data.observer.resources.unknown.js){jQuery("#wpshifty-what-live-js").append(z(F.data.observer.resources.unknown.js,C,I,"js"))}}}jQuery(".wpshifty-autocomplete-set[data-source] .wpshifty-autocomplete-list").each(function(){jQuery(this).empty();wp_shifty.autocomplete.sort().forEach(function(J){jQuery(".wpshifty-autocomplete-set[data-source] .wpshifty-autocomplete-list").append("<li>"+J+"</li>")})});jQuery.post(ajaxurl,{action:"wpshifty_measure_resource_sizes",files:JSON.stringify(wp_shifty.file_sizes),nonce:wp_shifty.nonce},function(J){if(J.files){J.files.forEach(function(K){jQuery('li[data-editor-rule-value="'+K.id+'"] .wpshifty-resource-size').text(K.size)})}});b();y()},false);jQuery(document).on("click",".wpshifty-editor-save",function(D){D.preventDefault();q();var C=jQuery("#wpshifty-editor-form").serialize();C+="&action=wpshifty_save";C+="&status="+jQuery(this).attr("data-editor-status");C+="&nonce="+wp_shifty.nonce;jQuery.post(ajaxurl,C,function(E){if(E.error){x(E.error,"error")}else{f();jQuery("#wpshifty-editor-form").removeClass("unsaved");jQuery(".wpshifty-what-editor-rule.unsaved").removeClass("unsaved");jQuery(".wpshifty-files-to-delete").remove();if(E.message){x(E.message,"success")}if(E.status){jQuery("#wpshifty-editor-form").attr("data-status",E.status)}if(E.warning){setTimeout(function(){x(E.warning,"warning")},1000)}}}).always(function(){r()}).error(function(E){if(E.status){switch(E.status){case 400:x(j("Session expired. Please refresh the page and try again."),"error");break;case 403:x(j("Request has been blocked. Please check your security plugin or firewall settings"),"error");break}}else{x(j("Unknown error occured. Please refresh the page and try again."),"error")}})});function u(C){q();t();jQuery("#wpshifty-editor-form").removeClass("should-refresh");jQuery("#wpshifty-what-placeholder").removeClass("wpshifty-hidden");jQuery("#wpshifty-what").addClass("wpshifty-empty");jQuery("#wpshifty-preview-autocomplete-set").trigger("wpshifty-reset");jQuery("#wpshifty-backup-preview-url").attr("href","#").addClass("wpshifty-hidden");jQuery("#wpshifty-should-refresh").removeClass("wpshifty-hidden");jQuery("#wpshifty-url-not-match").addClass("wpshifty-hidden");jQuery("#wpshifty-was-redirected").addClass("wpshifty-hidden");jQuery("#wpshifty-js-error").addClass("wpshifty-hidden");jQuery("#wpshifty-js-error-inner").empty();var D=jQuery("#wpshifty-editor-form").serialize();D+="&action=wpshifty_update_preview";D+="&nonce="+wp_shifty.nonce;jQuery.post(ajaxurl,D,function(E){if(E.error){x(E.error,"error");r()}else{A();jQuery("#wpshifty-editor-summary").html(E.summary);if(E.urls&&E.urls.length>0){d(E.urls[0]);if(E.urls.length>1){jQuery("#wpshifty-backup-preview-url").removeClass("wpshifty-hidden");jQuery("#wpshifty-backup-preview-url").attr("href",E.urls[1]);E.urls.forEach(function(F){jQuery("#wpshifty-preview-autocomplete-set .wpshifty-autocomplete-list").append(jQuery("<li>",{text:F}))});jQuery("#wpshifty-preview-autocomplete-set").trigger("wpshifty-set-toggle")}if(E.warning){setTimeout(function(){x(E.warning,"warning")},1000)}}else{jQuery("#wpshifty-preview").attr("src",jQuery("#wpshifty-preview").attr("data-src"))}}if(typeof C=="function"){C()}}).error(function(E){if(E.status){switch(E.status){case 400:x(j("Session expired. Please refresh the page and try again."),"error");break;case 403:x(j("Request has been blocked. Please check your security plugin or firewall settings"),"error");break}}else{x(j("Unknown error occured. Please refresh the page and try again."),"error")}r()})}function d(C){q();jQuery("#wpshifty-preview-url").val(C).removeAttr("disabled");C+=(C.match(/\?/)?"&":"?")+"wpshifty-preview="+wp_shifty.editor_id;jQuery("#wpshifty-preview").attr("src",C);if(c.location.href!==""&&typeof c.location.reload=="function"){c.location.reload()}}function B(){if(jQuery("#wpshifty-autorefresh:checked").length==0){u()}}jQuery(document).on("click","#wpshifty-add-condition",function(C){C.preventDefault();jQuery(this).toggleClass("toggled");if(jQuery(".wpshifty-condition-arrow").length>0){jQuery(".wpshifty-condition-arrow").remove()}if(jQuery(this).hasClass("toggled")){jQuery("#wpshifty-where").removeClass("wpshifty-hidden")}else{jQuery("#wpshifty-where").addClass("wpshifty-hidden");jQuery("#wpshifty-editor-rule-editors").find("[data-condition-editor].is-editing").remove()}});jQuery(document).on("click",'#wpshifty-condition-type-selector a[href^="#add-condition-"]',function(F){F.preventDefault();var D=jQuery(this).attr("href").replace(/^#add-condition-/,"");var E=jQuery("#wpshifty-condition-samples").find('[data-condition-editor="'+D+'"]').clone().addClass("is-editing").removeClass("wpshifty-hidden");var C=o();jQuery(E).attr("data-condition-id",C);jQuery("body").addClass("wpshifty-editing-condition");jQuery(E).find("*").each(function(){jQuery.each(this.attributes,function(G,H){H.value=H.value.replace(/%ID/,C)})});jQuery("#wpshifty-editor-rule-editors").prepend(E);if(jQuery(E).hasClass("wpshifty-condition-autosave")){jQuery(E).find('[href="#save-condition"]').trigger("click")}});jQuery(document).on("click",'a[href="#cancel-condition"]',function(C){C.preventDefault();jQuery("body").removeClass("wpshifty-editing-condition");jQuery(this).closest(".is-editing").remove()});jQuery(document).on("click",'a[href="#save-condition"]',function(E){E.preventDefault();var C=jQuery(this).closest("[data-condition-editor]").attr("data-condition-id");var D=jQuery(this).closest("[data-condition-editor]");jQuery('[data-condition-id="'+C+'"]:not(.is-editing)').remove();jQuery(D).removeClass("is-editing").addClass("wpshifty-hidden");jQuery(D).find("*").each(function(){jQuery.each(this.attributes,function(F,G){G.value=G.value.replace(/^wps_label_e_/,"wps_label_")})});q();jQuery("body").removeClass("wpshifty-editing-condition");jQuery("#wpshifty-add-condition").removeClass("toggled");jQuery("#wpshifty-where").addClass("wpshifty-hidden");u()});jQuery(document).on("click",'a[href="#delete-condition"]',function(D){D.preventDefault();if(confirm("Are you sure that you delete this rule?")){var C=jQuery(this).closest("[data-condition-editor]").attr("data-condition-id");jQuery('[data-condition-id="'+C+'"]').remove();q();jQuery("body").removeClass("wpshifty-editing-condition");jQuery("#wpshifty-add-condition").removeClass("toggled");jQuery("#wpshifty-where").addClass("wpshifty-hidden");u()}});jQuery(document).on("click",".wpshifty-condition-tag",function(){var E=jQuery(this).attr("data-condition-editor-id");var C=jQuery("[data-condition-id="+E+"]");if(jQuery("#wpshifty-editor-rule-editors").find("[data-condition-id="+E+"].is-editing").length==0){var D=jQuery(C).clone().removeClass("wpshifty-hidden").addClass("is-editing");jQuery(C).find("select").each(function(F){jQuery(D).find("select").eq(F).val(jQuery(this).val())});jQuery(C).find("*").each(function(){jQuery.each(this.attributes,function(F,G){G.value=G.value.replace(/^wps_label_/,"wps_label_e_")})});jQuery("body").addClass("wpshifty-editing-condition");jQuery("#wpshifty-preview-wrapper").append(D)}});jQuery(document).on("click",".wpshifty-preview-notice-close",function(C){C.preventDefault();jQuery(this).parent().addClass("wpshifty-hidden")});jQuery(document).on("click","#wpshifty-js-error-close",function(C){C.preventDefault();jQuery("#wpshifty-js-error").addClass("wpshifty-hidden")});jQuery(document).on("click","#wpshifty-backup-preview-url",function(F){F.preventDefault();var E=this;var D=true;if(typeof jQuery(this).attr("data-browser")!=="undefined"){var C=JSON.parse(jQuery(this).attr("data-browser"));C.forEach(function(G){jQuery(G.selector).val(G.value).trigger("change");if(typeof G.reload!=="undefined"&&G.reload==false){D=false}})}if(D){setTimeout(function(){if(jQuery(E).attr("href")!=="#"){var G=jQuery(E).attr("href")+(jQuery(E).attr("href").match(/\?/)?"&":"?")+"wpshifty-preview="+wp_shifty.editor_id;jQuery("#wpshifty-preview-url").val(jQuery(E).attr("href"))}u()},200)}});jQuery("#wpshifty-preview").on("load",function(){try{var C=jQuery(this)[0].contentWindow.location.href.replace(/(\?|&)wpshifty-(preview|redirected)=(\d*)/g,"").replace(/#(.*)$/,"")}catch(D){}jQuery("#wpshifty-preview-url").val(C);r();jQuery(document.getElementById("wpshifty-preview").contentWindow).unload(function(){q()})});function s(){var C=(jQuery("#wpshifty-preview-wrapper").width()-60)/jQuery("#wpshifty-preview").width();var D=(jQuery("#wpshifty-preview-wrapper").height()-100)/jQuery("#wpshifty-preview").height();if(C<1){jQuery("#wpshifty-preview").css("transform","scale("+C+")");if(D<C){jQuery("#wpshifty-preview").css("transform","scale("+D+")")}}else{if(D<1){jQuery("#wpshifty-preview").css("transform","scale("+D+")")}else{jQuery("#wpshifty-preview").css("transform","scale(1)")}}var E=document.getElementById("wpshifty-preview").getBoundingClientRect();jQuery("#wpshifty-device").width(E.width)}s();jQuery(window).on("resize orientchange",function(){s()});jQuery(document).on("wpshifty-autocomplete","#wpshifty-preview-url",function(){d(jQuery(this).val())});jQuery(document).on("keypress","#wpshifty-preview-url",function(C){if(C.keyCode==13){d(jQuery(this).val())}});jQuery(document).on("change","#wpshifty-viewport-quickselect",function(){var E=jQuery(this).find(":selected").attr("data-width");var C=jQuery(this).find(":selected").attr("data-height");var D=jQuery(this).find(":selected").attr("data-ua");jQuery("#wpshifty-preview-width").val(E);jQuery("#wpshifty-preview-height").val(C).trigger("change");jQuery('[name="browser[useragent]"]').val(D);u()});jQuery(document).on("change",".wpshifty-preview-size",function(){var D=jQuery("#wpshifty-preview-width").val();var C=jQuery("#wpshifty-preview-height").val();jQuery("#wpshifty-preview").width(D);jQuery("#wpshifty-preview").height(C);s()});jQuery(document).on("click",".wpshifty-reload",function(C){C.preventDefault();u()});jQuery(document).on("click","#wpshifty-new-tab",function(){c=window.open(jQuery("#wpshifty-preview").attr("src"),"shifty_preview")});jQuery(document).on("click",".wpshifty-preview-settings-toggle",function(C){C.preventDefault();jQuery("#wpshifty-preview-settings").toggleClass("opened")});function A(){jQuery("wpshifty-what-live-body .wpshifty-what-list-container").empty()}function n(D){var F=jQuery("#wpshifty-editor-samples [data-type="+D+"]").clone().addClass("unsaved");var E=o();var C=jQuery("<div>");C.append(F);jQuery(C).find("*").each(function(){jQuery.each(this.attributes,function(G,H){H.value=H.value.replace(/%ID/,E)})});return F}function h(G,E){var D="";try{var C=JSON.parse(jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"wpshifty_measure_resource_sizes",files:JSON.stringify([{url:G,id:"x"}]),nonce:wp_shifty.nonce},async:false}).responseText);D=C.files[0].size}catch(H){}var F='<div class="wpshifty-resource-overwrite-data"><span class="wpshifty-resource-element">'+G+'</span><span class="wpshifty-resource-size" data-loading="'+j("loading")+'">'+D+'</span><div class="wpshifty-fullwidth"><a href="#" class="wpshifty-live-file-editor-trigger wpshifty-btn" data-rule-editor-id="'+E+'">'+j("Edit")+'</a> <a href="#" class="wpshifty-restore-overwrite wpshifty-btn" data-rule-editor-id="'+E+'">'+j("Restore")+"</a></div></div>";return F}jQuery(document).on("click","#wpshifty-what-header a",function(C){C.preventDefault();jQuery(this).closest("#wpshifty-what-header").find("a").removeClass("active");jQuery(this).addClass("active");jQuery(".wpshifty-what-body").addClass("wpshifty-hidden");jQuery(jQuery(this).attr("href")).removeClass("wpshifty-hidden");jQuery(".wpshifty-editor-wrapper").attr("data-wpshifty-tab",jQuery(this).attr("href").substr(1))});jQuery(document).on("click",".wpshifty-what-header a",function(C){C.preventDefault();jQuery(this).closest(".wpshifty-what-header").find("li").removeClass("active");jQuery(this).parent().addClass("active");jQuery(this).closest("ul").next().find(".wpshifty-what-list-container").addClass("wpshifty-hidden");jQuery(jQuery(this).attr("href")).removeClass("wpshifty-hidden")});jQuery(document).on("change",".wpshifty-plugin-checkbox",function(){if(jQuery(this).prop("checked")){var C=jQuery(this).clone();jQuery(C).attr("type","hidden");jQuery(C).attr("name",jQuery(this).attr("data-name"));jQuery("#wpshifty-what-editor-plugins").prepend(C)}else{jQuery("#wpshifty-what-editor-plugins").find('[name="'+jQuery(this).attr("data-name")+'"]').remove()}B()});jQuery(document).on("click",'#wpshifty-what-live a[href="#disable-resource"]',function(D){D.preventDefault();var C=n("disable");var F=jQuery(this).closest(".wpshifty-resource-element-wrapper");var E=jQuery(F).find(".wpshifty-resource-element").text();jQuery(C).find('.wpshifty-buttonset-rule-type [value="'+jQuery(F).attr("data-editor-type")+'"]').prop("checked",true);jQuery(C).find('.wpshifty-buttonset-match-type [value="exact"]').prop("checked",true);jQuery(C).find(".wpshifty-rule-value").val(jQuery(F).attr("data-editor-rule-value"));jQuery(C).find(".wpshifty-readonly-rule").prop("checked",true);jQuery(C).find(".wpshifty-readonly-rule-summary").text(E);if(["css_inline","js_inline"].includes(jQuery(F).attr("data-editor-type"))){jQuery(C).find(".wpshifty-readonly-rule-summary-preview").val(E.substr(0,wp_shifty.resource_max_length)+(E.length>wp_shifty.resource_max_length?"...":""))}jQuery("#wpshifty-what-editor-disable .wpshifty-what-editor-rules").prepend(C);jQuery(F).addClass("wpshifty-resource-disabled");B()});jQuery(document).on("click",'#wpshifty-what-live a[href="#enable-resource"]',function(D){D.preventDefault();var E=jQuery(this).closest(".wpshifty-resource-element-wrapper");var C=jQuery(E).attr("data-editor-rule-value");jQuery("#wpshifty-what-editor-disable .wpshifty-what-editor-rule").each(function(){var F=jQuery(this).find(".wpshifty-rule-value");var G=jQuery(this).find('.wpshifty-buttonset-match-type [value="exact"]').prop("checked");if(jQuery(F).val()==C&&G){jQuery(this).remove()}});jQuery(E).removeClass("wpshifty-resource-disabled");B()});jQuery(document).on("click",'#wpshifty-what-live a[href="#overwrite-resource"]',function(D){D.preventDefault();var F=jQuery(this).closest(".wpshifty-resource-element-wrapper");var C=n("overwrite");var E=jQuery(F).find(".wpshifty-resource-element").text();jQuery(C).find(".wpshifty-rule-value").val(jQuery(F).attr("data-editor-rule-value"));jQuery(C).find(".wpshifty-file-type").val(jQuery(F).attr("data-editor-type"));jQuery(C).find(".wpshifty-readonly-rule").prop("checked",true);jQuery(C).find(".wpshifty-readonly-rule-summary").text(E);if(["css_inline","js_inline"].includes(jQuery(F).attr("data-editor-type"))){jQuery(C).find(".wpshifty-readonly-rule-summary-preview").val(E.substr(0,wp_shifty.resource_max_length)+(E.length>wp_shifty.resource_max_length?"...":""))}jQuery("#wpshifty-what-editor-overwrite .wpshifty-what-editor-rules").prepend(C);jQuery(C).find(".wpshifty-file-editor-trigger").trigger("click");jQuery(F).addClass("wpshifty-resource-overwritten");jQuery(document).one("wpshifty-saved","#wpshifty-file-editor",function(J,I,H){var G=jQuery(h(I,H));jQuery(F).find(".wpshifty-resource-overwrite-data").remove();G.insertAfter(F.find(".wpshifty-resource-data"));jQuery(document).one("click","#wpshifty-file-editor-close",function(){B()})})});jQuery(document).on("click",".wpshifty-restore-overwrite",function(C){C.preventDefault();var D=jQuery(this).closest(".wpshifty-resource-element-wrapper");jQuery('.wpshifty-what-editor-rule[data-rule-id="'+jQuery(this).attr("data-rule-editor-id")+'"]').find(".wpshifty-editor-rule-remove").trigger("click");B()});jQuery(document).on("click",'#wpshifty-what-live a[href="#preload-resource"]',function(D){D.preventDefault();var F=jQuery(this).closest(".wpshifty-resource-element-wrapper");var C=n("preload");var E=jQuery(F).find(".wpshifty-resource-element").text();jQuery(C).find(".wpshifty-rule-value").val(jQuery(F).attr("data-editor-rule-value"));setTimeout(function(){jQuery(C).find(".wpshifty-rule-value").trigger("change")},1);jQuery(C).find(".wpshifty-readonly-rule").prop("checked",true);jQuery(C).find(".wpshifty-readonly-rule-summary").text(E);jQuery("#wpshifty-what-editor-preload .wpshifty-what-editor-rules").prepend(C);jQuery(F).addClass("wpshifty-resource-preloaded")});jQuery(document).on("click",'#wpshifty-what-live a[href="#unpreload-resource"]',function(D){D.preventDefault();var E=jQuery(this).closest(".wpshifty-resource-element-wrapper");var C=jQuery(E).attr("data-editor-rule-value");jQuery("#wpshifty-what-editor-preload .wpshifty-what-editor-rule").each(function(){var F=jQuery(this).find(".wpshifty-rule-value");if(jQuery(F).val()==C){jQuery(this).remove()}});jQuery(E).removeClass("wpshifty-resource-preloaded")});jQuery(document).on("click",'#wpshifty-what-live a[href="#lazyload-resource"]',function(D){D.preventDefault();var C=n("lazyload");var F=jQuery(this).closest(".wpshifty-resource-element-wrapper");var E=jQuery(F).find(".wpshifty-resource-element").text();jQuery(C).find('.wpshifty-buttonset-rule-type [value="'+jQuery(F).attr("data-editor-type")+'"]').prop("checked",true);jQuery(C).find('.wpshifty-buttonset-match-type [value="exact"]').prop("checked",true);jQuery(C).find('.wpshifty-buttonset-load-type [value="'+jQuery(this).attr("data-load-type")+'"]').prop("checked",true);jQuery(C).find(".wpshifty-rule-value").val(jQuery(F).attr("data-editor-rule-value"));jQuery(C).find(".wpshifty-readonly-rule").prop("checked",true);jQuery(C).find(".wpshifty-readonly-rule-summary").text(E);if(["css_inline","js_inline"].includes(jQuery(F).attr("data-editor-type"))){jQuery(C).find(".wpshifty-readonly-rule-summary-preview").val(E.substr(0,wp_shifty.resource_max_length)+(E.length>wp_shifty.resource_max_length?"...":""))}jQuery("#wpshifty-what-editor-lazyload .wpshifty-what-editor-rules").prepend(C);jQuery(F).addClass("wpshifty-resource-lazyloaded");B()});jQuery(document).on("click",'#wpshifty-what-live a[href="#unlazyload-resource"]',function(D){D.preventDefault();var E=jQuery(this).closest(".wpshifty-resource-element-wrapper");var C=jQuery(E).attr("data-editor-rule-value");jQuery("#wpshifty-what-editor-lazyload .wpshifty-what-editor-rule").each(function(){var F=jQuery(this).find(".wpshifty-rule-value");var G=jQuery(this).find('.wpshifty-buttonset-match-type [value="exact"]').prop("checked");if(jQuery(F).val()==C&&G){jQuery(this).remove()}});jQuery(E).removeClass("wpshifty-resource-lazyloaded");B()});jQuery(document).on("click","#wpshifty-what-editor .wpshifty-add-new",function(){var D=jQuery(this).attr("data-type");var C=n(D);jQuery(this).closest(".wpshifty-what-list-container").find(".wpshifty-what-editor-rules").prepend(C)});jQuery(document).on("click",".wpshifty-editor-rule-remove",function(F){F.preventDefault();var C=jQuery(this).closest(".wpshifty-what-editor-rule");var E=jQuery(this).closest(".wpshifty-what-editor-rule").find(".wpshifty-rule-value").val();var D=jQuery(this).closest(".wpshifty-what-editor-rule").attr("data-type");if(["disable","overwrite","lazyload"].includes(D)){switch(D){case"disable":var G="disabled";break;case"overwrite":var G="overwritten";break;case"lazyload":var G="lazyloaded";break}jQuery('#wpshifty-what-live [data-editor-rule-value="'+E+'"]').closest(".wpshifty-resource-element-wrapper").removeClass("wpshifty-resource-"+G)}if(jQuery(C).find(".wpshifty-file-editor-url").length>0&&jQuery(C).find(".wpshifty-file-editor-url").val()!==""){if(jQuery(C).hasClass("unsaved")){q();jQuery.post(ajaxurl,{action:"wpshifty_delete_file",file:jQuery(C).find(".wpshifty-file-editor-url").val(),nonce:wp_shifty.nonce},function(H){r();if(H.error){x(H.error,"error")}else{jQuery(C).remove()}})}else{jQuery("<input>",{type:"hidden","class":"wpshifty-files-to-delete",name:"files_to_delete[]",value:jQuery(C).find(".wpshifty-file-editor-url").val()}).appendTo("#wpshifty-editor-form");jQuery(C).remove()}}else{jQuery(C).remove()}});jQuery(document).on("click",".wpshifty-file-editor-trigger",function(H){H.preventDefault();var D=jQuery(this).closest(".wpshifty-what-editor-rule");var F=jQuery(D).find(".wpshifty-file-editor-source").val();var G=jQuery(D).find(".wpshifty-file-preview");var C=jQuery(this).attr("data-file-name");var I=jQuery(this).next();var E=jQuery(D).find(".wpshifty-readonly-rule");jQuery("#wpshifty-file-editor-current-file").empty();if(I.val()!==""){l(I.val());if(F&&!F.match(/([abcdef0-9]{32})/)){jQuery("#wpshifty-file-editor-current-file").text(I.val()+" ("+F+")")}}else{if(F!==""){l(F);if(F&&!F.match(/([abcdef0-9]{32})/)){jQuery("#wpshifty-file-editor-current-file").text(F)}}}jQuery("#wpshifty-file-editor").attr("data-filename",C);jQuery("#wpshifty-file-editor").val("");jQuery("#wpshifty-file-editor-wrapper").removeClass("wpshifty-hidden");jQuery(document).one("wpshifty-saved","#wpshifty-file-editor",function(L,K){jQuery(D).find(".wpshifty-readonly-rule-summary").text(F);jQuery(D).find(".wpshifty-overwirte-new-resource").text(K);jQuery(I).val(K);jQuery(E).prop("checked",true);var J=jQuery("#wpshifty-file-editor").val();if(G&&J!==""){jQuery(G).text(J.substr(0,wp_shifty.resource_max_length))}})});jQuery(document).on("click",".wpshifty-live-file-editor-trigger",function(C){C.preventDefault();var D=jQuery(this).closest(".wpshifty-resource-element-wrapper");jQuery('.wpshifty-what-editor-rule[data-rule-id="'+jQuery(this).attr("data-rule-editor-id")+'"]').find(".wpshifty-file-editor-trigger").trigger("click");jQuery(document).one("wpshifty-saved","#wpshifty-file-editor",function(H,G,F){var E=h(G,F);jQuery(D).find(".wpshifty-resource-overwrite-data").remove();jQuery(E).insertAfter(D.find(".wpshifty-resource-data"))})});jQuery(document).on("change",".wpshifty-preload-url",function(){var D=jQuery(this).val().replace(/\?(.*)$/,"").split(".").pop();var C=false;switch(D){case"css":C="style";break;case"js":C="script";break;case"woff":case"woff2":case"ttf":case"eot":case"svg":C="font";break;case"jpeg":case"jpg":case"png":case"webp":case"avif":case"gif":C="image";break;case"mp3":case"wav":C="audio";break;case"mp4":case"webm":case"mov":case"avi":C="video";break;default:C="document";break}jQuery(this).closest(".wpshifty-what-editor-rule").find(".wpshifty-preload-as").val(C)});function b(){jQuery(".wpshifty-render-blocking").removeClass("wpshifty-render-blocking");jQuery(".wpshifty-unused").removeClass("wpshifty-unused");jQuery(".wpshifty-lighthouse-ms").empty();jQuery(".wpshifty-lighthouse-bytes").empty();wp_shifty.lighthouse["render-blocking-resources"].forEach(function(D){var C=jQuery('[data-editor-rule-value="'+D.url+'"]');if(jQuery(C).length>0){jQuery(C).addClass("wpshifty-render-blocking");jQuery(C).find(".wpshifty-lighthouse-ms").text(D.wastedMs)}});wp_shifty.lighthouse.unused.forEach(function(D){var C=jQuery('[data-editor-rule-value="'+D.url+'"]');if(jQuery(C).length>0){jQuery(C).addClass("wpshifty-unused");jQuery(C).find(".wpshifty-lighthouse-bytes").text(D.wastedBytes)}})}jQuery(document).on("click","#wpshifty-lighthouse",function(E){E.preventDefault();var D=(jQuery("#wpshifty-preview-width").val()<768?"mobile":"desktop");var C=jQuery("#wpshifty-preview").attr("src");q();jQuery.post(ajaxurl,{action:"wpshifty_lighthouse",url:C,device:D,nonce:wp_shifty.nonce},function(F){r();if(F.error){x(F.error,"error")}else{x(j("Lighthouse test finished. Device: "+D),"success");wp_shifty.lighthouse=F;b();y()}}).always(function(){r()}).error(function(F){if(F.status){switch(F.status){case 400:x(j("Session expired. Please refresh the page and try again."),"error");break;case 403:x(j("Request has been blocked. Please check your security plugin or firewall settings"),"error");break}}else{x(j("Unknown error occured. Please refresh the page and try again."),"error")}})});function e(){var C=jQuery("#wpshifty-file-editor-wrapper").attr("data-mime");var D={theme:"monokai",mode:(C=="text/css"?"css":(C=="application/javascript"?"javascript":"xml")),htmlMode:(C=="text/plain"?true:false),lineNumbers:true,lineWrapping:true};wp_shifty.cm=CodeMirror.fromTextArea(document.getElementById("wpshifty-file-editor"),D);wp_shifty.cm.on("change",function(){jQuery("#wpshifty-file-editor").val(wp_shifty.cm.getValue())})}function l(E){if(typeof E!=="undefined"){q();if(E.match(/([abcdef0-9]{32})/)){var C=jQuery("#wpshifty-preview").contents().find('[data-wpshifty-hash="'+E+'"]');var D=(jQuery(C).prop("tagName")=="SCRIPT"?"text/javascript":"text/css");setTimeout(function(){jQuery("#wpshifty-file-editor").val(jQuery(C).text().trim()).trigger("change")},1);jQuery("#wpshifty-file-editor-wrapper").attr("data-mime",D);e();r()}else{jQuery.post(ajaxurl,{action:"wpshifty_load_file",source:E,nonce:wp_shifty.nonce},function(F){r();if(F.error){x(F.error,"error")}else{jQuery("#wpshifty-file-editor").val(F.content);jQuery("#wpshifty-file-editor-wrapper").attr("data-mime",F.mime);e()}})}}else{jQuery("#wpshifty-file-editor-wrapper").attr("data-mime","text/plain");e();wp_shifty.cm.refresh()}}jQuery(document).on("click","#wpshifty-file-editor-wrapper .wpshifty-format-code",function(F){F.preventDefault();q();var D=jQuery("#wpshifty-file-editor").val();var C=jQuery("#wpshifty-file-editor-wrapper").attr("data-mime");var E=jQuery(this).attr("data-format");jQuery.post(ajaxurl,{action:"wpshifty_format_code",format:E,source:D,mime:C,nonce:wp_shifty.nonce},function(G){if(G.error){x(G.error,"error")}else{jQuery("#wpshifty-file-editor").val(G.content).trigger("change")}}).always(function(){r()}).error(function(G){if(G.status){switch(G.status){case 400:x(j("Session expired. Please refresh the page and try again."),"error");break;case 403:x(j("Request has been blocked. Please check your security plugin or firewall settings"),"error");break}}else{x(j("Unknown error occured. Please refresh the page and try again."),"error")}})});jQuery(document).on("change","#wpshifty-file-editor",function(C){jQuery(this).addClass("unsaved");wp_shifty.cm.setValue(jQuery(this).val())});jQuery(document).on("click","#wpshifty-file-editor-close",function(C){C.preventDefault();if(!jQuery("#wpshifty-file-editor").hasClass("unsaved")||confirm(j("Your changes will be lost if you don’t save them."))){jQuery("#wpshifty-file-editor").off("wpshifty-saved");var D=jQuery('.wpshifty-what-editor-rule[data-rule-id="'+jQuery("#wpshifty-file-editor").attr("data-filename")+'"]');if(jQuery(D).find(".wpshifty-file-editor-url").val()==""){jQuery(D).find(".wpshifty-editor-rule-remove").trigger("click")}jQuery("#wpshifty-file-editor").removeAttr("data-filename").removeClass("unsaved").val("").trigger("change");jQuery("#wpshifty-file-editor-current-file").empty();jQuery("#wpshifty-file-editor-wrapper").removeAttr("data-mime").addClass("wpshifty-hidden");wp_shifty.cm.toTextArea()}});jQuery(document).on("click","#wpshifty-file-editor-save",function(F){F.preventDefault();jQuery("#wpshifty-file-editor").removeClass("unsaved");var E=jQuery("#wpshifty-file-editor").val();var D=jQuery("#wpshifty-file-editor-wrapper").attr("data-mime");var C=jQuery("#wpshifty-file-editor").attr("data-filename");wp_shifty.cm.save();q();jQuery.post(ajaxurl,{action:"wpshifty_save_file",filename:C,source:E,mime:D,nonce:wp_shifty.nonce},function(G){if(G.error){x(G.error,"error")}else{x(G.message,"success");jQuery("#wpshifty-file-editor").trigger("wpshifty-saved",[G.file,C])}}).always(function(){r()}).error(function(G){if(G.status){switch(G.status){case 400:x(j("Session expired. Please refresh the page and try again."),"error");break;case 403:x(j("Request has been blocked. Please check your security plugin or firewall settings"),"error");break}}else{x(j("Unknown error occured. Please refresh the page and try again."),"error")}})});q();jQuery("#wpshifty-viewport-quickselect").trigger("change");u();if(jQuery("#wpshifty-what-editor-preload .wpshifty-what-editor-rules").length>0){jQuery("#wpshifty-what-editor-preload .wpshifty-what-editor-rules").sortable();jQuery("#wpshifty-what-editor-lazyload .wpshifty-what-editor-rules").sortable()}const w=new MutationObserver(function(D,C){if(jQuery("#wpshifty-editor-form").find('[name^="condition"], [name^="browser"], [name^="elements"]').serialize()!==last_saved_form){jQuery("#wpshifty-editor-form").addClass("unsaved")}else{jQuery("#wpshifty-editor-form").removeClass("unsaved")}if(jQuery("#wpshifty-editor-form").find("[name^=elements]").serialize()!==last_refreshed_form){jQuery("#wpshifty-editor-form").addClass("should-refresh")}else{jQuery("#wpshifty-editor-form").removeClass("should-refresh")}});f();w.observe(document.getElementById("wpshifty-editor-form"),{attributes:true,childList:true,subtree:true})});